
<div class="side-bar">
  <%= render "shared/side_bar" %>
</div>
<!-- <div class="mock-map col-md-6 col-md-offset-1">
  <h1>Your Filtered Results <i class="fa fa-thumbs-o-up"></i></h1>
  <iframe width="800" height="500" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/search?q=Music%20Venue%20Denver&key=AIzaSyCd-SnBa7U9_XpirvZCLYFsR2W38wSMoTo"></iframe>
</div> -->

<div id='map'><iframe width='100%' height='500px' frameBorder='0' src='https://a.tiles.mapbox.com/v4/lydias303.lce9okp9/attribution,zoompan,zoomwheel,geocoder,share.html?access_token=pk.eyJ1IjoibHlkaWFzMzAzIiwiYSI6ImM0WG9rY28ifQ.bM1Nx1fsDmbAFLVP1f9Img'></iframe></div>

<script type="text/javascript">

    window.onload = function() {
      var map,
      dir;

      map = L.map('map', {
        layers: MQ.mapLayer(),
        center: [ 40.045049, -105.961737 ],
        zoom: 7
      });

      dir = MQ.routing.directions()
      .on('success', function(data) {
        var legs = data.route.legs,
        html = '',
        maneuvers,
        i;

        if (legs && legs.length) {
          maneuvers = legs[0].maneuvers;

          for (i=0; i<maneuvers.length; i++) {
            html += (i+1) + '. ';
            html += maneuvers[i].narrative + '<br />';
          }

          L.DomUtil.get('route-narrative').innerHTML = html;
        }
      });
      map.locate({setView: false, maxZoom: 16});

      function onLocationFound(e) {
        // var radius = e.accuracy / 2;
        // L.marker(e.latlng).addTo(map)
        // .bindPopup("You are within " + radius + " meters from this point").openPopup();
        //
        // L.circle(e.latlng, radius).addTo(map);
        dir.route({
          locations: [
          { latLng: { lat: e.latlng.lat, lng: e.latlng.lng}},
          // { latLng: { lat: 39.781, lng: -105.078 }},
          // "Golden, CO",
          // {postalCode: '80127'},
          // {city: 'Steamboat Springs', state: 'CO'},
          // { street: '8500 Pena Blvd', city: 'Denver', state: 'CO' },
          "<%= @event.location %>"
          ]
        });

        map.addLayer(MQ.routing.routeLayer({
          directions: dir,
          fitBounds: true
        }));
      }

      map.on('locationfound', onLocationFound);

      function onLocationError(e) {
        alert(e.message);
      };

      map.on('locationerror', onLocationError);

      // var scottIcon = L.icon({
      //   iconUrl: 'https://scontent.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/10155510_10204458136868133_2678102298998605784_n.jpg?oh=1b229d0033f64ab07645de7a59ecc41c&oe=5582A623',
      //
      //   iconSize:     [64, 64], // size of the icon
      //   popupAnchor:  [0, -76] // point from which the popup should open relative to the iconAnchor
      // });
      // L.marker([39.781, -105.078], {icon: scottIcon}).addTo(map).bindPopup("Still famous in Lightning Talks!");
      //
      // var turingIcon = L.icon({
      //   iconUrl: 'https://pbs.twimg.com/profile_images/444146105312243712/EHdy1GyV_400x400.png',
      //
      //   iconSize:     [64, 64], // size of the icon
      //   popupAnchor:  [0, -40] // point from which the popup should open relative to the iconAnchor
      // });
      // L.marker([39.749747, -104.999977], {icon: turingIcon}).addTo(map).bindPopup("Turing School of Software and Design<br>1510 Blake Street, Denver, CO 80202");
    }
  </script>
<!-- <div class="row">
  <div class="col-md-2 home-search-bar">
  <form id="search-form" class="form-inline search-bar" role="form" method="post" action="/" target="_blank">
   <div class="input-group">
     <input type="text" class="form-control search-form" placeholder="Search By State">
       <span class="input-group-btn">
         <button type="submit" class="btn btn-primary search-btn" data-target="#search-form" name="q"><i class="fa fa-search"></i></button>
       </span>
     </div>
   </form>
 <form id="search-form" class="form-inline search-bar" role="form" method="post" action="/" target="_blank">
  <div class="input-group">
    <input type="text" class="form-control search-form" placeholder="Search By Date">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-primary search-btn" data-target="#search-form" name="q"><i class="fa fa-search"></i></button>
      </span>
    </div>
  </form>
<form id="search-form" class="form-inline search-bar" role="form" method="post" action="/" target="_blank">
 <div class="input-group">
   <input type="text" class="form-control search-form" placeholder="Search By Artist">
     <span class="input-group-btn">
       <button type="submit" class="btn btn-primary search-btn" data-target="#search-form" name="q"><i class="fa fa-search"></i></button>
     </span>
   </div>
 </form>
</div> -->
